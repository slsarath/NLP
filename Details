import requests

# Define the streaming API URL
streaming_api_url = "https://example.com/streaming-api"  # Replace with your API URL

# Define any headers or authentication (if required)
headers = {
    "Authorization": "Bearer your_access_token",  # Replace with your token
    "Accept": "application/json",
}

try:
    # Establish a connection to the streaming API
    response = requests.get(streaming_api_url, headers=headers, stream=True)

    # Check for a successful connection
    if response.status_code == 200:
        print("Connected to the streaming API. Receiving data...")
        
        # Iterate through the streamed data
        for line in response.iter_lines():
            if line:
                # Decode and process each line of the stream
                data = line.decode("utf-8")
                print(f"Received: {data}")
    else:
        print(f"Failed to connect. Status code: {response.status_code}")
        print(f"Response: {response.text}")

except requests.exceptions.RequestException as e:
    print(f"An error occurred: {e}")